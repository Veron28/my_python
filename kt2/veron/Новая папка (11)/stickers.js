!function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)r=s[d],o[r]&&f.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);for(u&&u(e);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={"web/stickers":0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([142,"bundles/common"]),n()}({"0lFn":function(t,e,n){"use strict";n.r(e);n("a1Th"),n("Btvt");var i=function(){var t,e=!1,n=!1,o={},a={},r={},s={};function c(t){if(window.isMVK){var e=document.createElement("script");e.onload=function(){t()},e.src="/js/cmodules/web/bodymovin.js",document.head.appendChild(e)}else stManager.add([jsc("web/bodymovin.js")],function(){t()})}function l(t){var e=f(t),n=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var i=attr(t,"data-loop-count");i=parseInt(i),isNaN(i)&&(i=3),-1!==i&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",function o(a){var r=!0;i>=++n&&(r=!1),r&&(d(t,!1),""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",o),e.stop())})}}function u(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function d(t,e){s[u(t)]=e}function f(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var n=a[e];return n||!1}function p(t,e){var n=f(t);if(n)"function"==typeof e&&e(n);else{var i=attr(t,"data-uniq-id");if(!function(t){return!!s[u(t)]}(t)){d(t,!0);var r=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),l=!1;if(c&&(l=o[c]?v(t):r&&v(t)),l){var p={container:t,renderer:"svg",loop:!0,autoplay:!1,name:i,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};o[c]?p.animationData=o[c]:p.path=r;var m=geByClass1("svg_sticker_animation",t);if(m&&re(m),n=bodymovin.loadAnimation(p),!o[c])return void n.addEventListener("data_ready",function(){o[c]=n.animationData,a[i]=n,"function"==typeof e&&e(n)})}"function"==typeof e&&(a[i]=n,"function"==typeof e&&e(n))}}}return{checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),n=geByClass1("sticker_animation",e);i.loadAndPlaySticker(n)}},checkSettingsAndLoad:function(t,e,n){StickersSettings.getAutoplay()&&(n?i.loadStickerInMvkIMAndPlay(t.id,e):-1!==t.text.indexOf("sticker_animation")&&i.loadStickerInMvkIMAndPlay(t.id,e))},loadStickerInMvkIMAndPlay:function(t,e){var n="_msg"+t;e&&(n="msg_id_"+t);var o=geByClass1("sticker_animation",geByClass1(n));i.loadAndPlayStickerWithTimer(o,500)},loadAutoplayAnimationStickers:function(t){if("undefined"!=typeof bodymovin){if(t){if(n)return;n=!0}if(!e){e=!0;var o=geByClass("sticker_animation_autoplay");o&&each(o,function(t,e){p(e,function(){l(e)})}),e=!1}}else c(function(){i.loadAutoplayAnimationStickers()})},loadAndPlaySticker:function(t){if(t)return"undefined"==typeof bodymovin?(c(function(){i.loadAndPlaySticker(t)}),""):void requestAnimationFrame(()=>{p(t,function(){l(t)})})},loadAndPlayStickerWithTimer:function(t,e){if(t&&!r[t]){e||(e=1e3);var n=ge(t);hasClass(n,"sticker_animation_disabled_timer")||(r[t]=setTimeout(function(){!n&&(n=ge(t),hasClass(n,"sticker_animation_disabled_timer"))||(i.loadAndPlaySticker(n),clearTimeout(r[t]),r[t]=!1)},e))}},reloadStickers:function(){a={}},touchStartSticker:function(e){e.addEventListener("contextmenu",i.preventContextMenu,!1),t=setTimeout(function(){i.loadAndPlaySticker(e)},500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){event.preventDefault(),event.stopPropagation()}};function v(t){var e=t.getBoundingClientRect().top,n=t.getBoundingClientRect().bottom;return e<window.innerHeight&&n>=0&&isVisible(t)}}(),o={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return o.autoplay}},a={},r=(t,e,n,i)=>{delete a[e],1===i?Emoji.favorite.addFavoriteSticker(t,e,n):-1===i&&Emoji.favorite.deleteFavoriteSticker(t,e,n)};var s={toggleFavorite:function(t,e,n){if(e&&e.stopPropagation(),!hasClass(t,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var i=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(showFastBox(getLang("global_error"),i).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var o=attr(t,"data-sticker-id"),s=attr(t,"data-hash");return!(!o||!s)&&!a[o]&&(a[o]=1,toggleClass(t,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:o,hash:s},{onDone:r.pbind(n,o,t)}))},getStickerUrl:function(t,e){var n={id:t,size:e};return window.isMVK?rs(window.store.stickers.url_template,n):getTemplate("stickers_sticker_url",n)}};window.StickersAnimation=i,window.StickersSettings=o,window.Stickers=s;try{stManager.done(jsc("web/stickers.js"))}catch(t){}},142:function(t,e,n){t.exports=n("0lFn")}});